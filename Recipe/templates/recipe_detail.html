{% load static %}

<header style="display:flex; justify-content:space-between; align-items:center;">
    <h2>üç≥ Cook Book</h2>

    <div>
        {% if user.is_authenticated %}
            <span>Welcome, {{ user.username }}</span> |
            <a href="{% url 'logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a> |
            <a href="{% url 'signup' %}">Signup</a>
        {% endif %}
    </div>
</header>

<h1>{{ recipe.title }}</h1>
<p>{{ recipe.description }}</p>
<p><strong>Serves:</strong> {{ recipe.serves }}</p>

<hr>

<h3>Ingredients</h3>
<ul>
    {% for ing in ingredients %}
        <li>{{ ing.quantity }} {{ ing.unit }} {{ ing.name }}</li>
    {% endfor %}
</ul>

<hr>

<h3>Steps</h3>
<ol>
    {% for step in steps %}
        <li>
            {{ step.instruction }}
            {% if step.ingredients.all %}
                <br>
                <small>
                    Uses:
                    {% for ing in step.ingredients.all %}
                        {{ ing.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </small>
            {% endif %}
        </li>
    {% endfor %}
</ol>

<hr>

<h3>You may also like</h3>
<div class="recipe-grid">
    {% for r in random_recipes %}
        <div class="recipe-card">
            <h4>{{ r.title }}</h4>
            <p>{{ r.description|truncatechars:60 }}</p>
            <a href="{% url 'recipe_detail' r.id %}">View</a>
        </div>
    {% empty %}
        <p>No other recipes yet.</p>
    {% endfor %}
</div>
